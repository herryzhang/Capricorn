## 标准库

- 输出日志以及纪录日志
- 对JSON进行编码和解码
- 处理输入和输出，并以流的方式处理数据
- 让标准库里多个包协同工作

Go 标准库是一组核心包，用来扩展和增强语言的能力。由于这些包和语言绑在一起发布，它们会得到以下特殊的保证:
- 每次语言更新，哪怕是小更新，都会带有标准库;
- 这些标准库会严格遵守向后兼容的承诺;
- 标准库是 Go 语言开发、构建、发布过程的一部分;
- 标准库由 Go 的构建者们维护和评审;
- 每次 Go 语言发布新版本时，标准库都会被测试，并评估性能。

### 文档与源代码
- 标准库里的顶级目录和包
```go
archive
debug
hash
mime
sort
time
bufio
encoding
html
net
strconv
unicode
bytes
errors
image
os
strings
unsafe
compress
expvar
index
path
sync
container
flag
io
reflect
syscall
crypto    
database
fmt       
go
log       
math
regexp    
runtime
testing   
text
```
Go 语言团队在网站上维护了一个文档，参见 http://golang.org/pkg/。

### 记录日志
 - 即便没有表现出来，你的程序依旧可能有bug。
 - 日志是一种找到这些 bug，更好地了解程序工作状态的方法。
 - 日志是开发人员的眼睛和耳朵，可以用来跟踪、调试和分析代码。
基于此，标准库提供了log包，可以对日志做一些最基本的配置。根据特殊需要，开发人员还可以自己定制日志记录器。
 
### log 包
- 跟踪日志的样例 
```go
TRACE: 2009/11/10 23:00:00.000000 /tmpfs/gosandbox-/prog.go:14: message
```
- 使用最基本的log包
[listing03.go](./listing03.go)

- 定制的日志记录器
要想创建一个定制的日志记录器，需要创建一个 Logger 类型值。可以给每个日志记录器配 置一个单独的目的地，并独立设置其前缀和标志。
[listing11.go](./listing11.go)

### 编码/解码
如果程序需要处理 XML 或者 JSON，可以使用标准库里名为 xml 和 json 的包，它们可以处理这些格式的数据。
如果想实现自己的数据格式的编解码，可以将这些包的实现作为指导。

- 解码 JSON
使用 json 包的NewDecoder函数以及 Decode 方法进行解码。

- 编码 JSON
使用 json 包的 MarshalIndent 函数进行编码。 
这个函数可以很方便地将 Go 语言的 map 类型的值或者结构类型的值转换为易读格式的 JSON 文档。
序列化(marshal)是指将数据转换为 JSON 字符串的过程。

### 结论
- 在标准库里都已经提供了处理 JSON 和 XML 格式所需要的诸如解码、反序列化以及序列化 数据的功能。
- 随着每次 Go 语言新版本的发布，这些包的执行速度也越来越快。
- 这些包是处理 JSON 和 XML 的最佳选择。

### 输入和输出
- 类 UNIX 的操作系统如此伟大的一个原因是，一个程序的输出可以是另一个程序的输入这一理念。
- 同样的理念扩展到了标准库的 io 包，而且提供的功能很神奇。这个包可以以流的方式高效 处理数据，而不用考虑数据是什么，数据来自哪里，以及数据要发送到哪里的问题。

#### Writer 和 Reader 接口
io 包是围绕着实现了 io.Writer 和 io.Reader 接口类型的值而构建的。
由于 io.Writer 和 io.Reader 提供了足够的抽象，这些 io 包里的函数和方法并不知道数据的类型，也不知道 这些数据在物理上是如何读和写的。

### 结论
应该花时间看一下标准库中提供了些什么，以及它 是如何实现的——不仅要防止重新造轮子，还要理解 Go 语言的设计者的习惯，并将这些习惯应 用到自己的包和 API 的设计上。

### 小结

- 标准库有特殊保证，并且被社区广泛应用
- 使用标准库的包会让你的代码更加有利于管理，别人也会更加信任你的代码
- 100余个包被合理组织，分布到38个类别里面
- 标准库log包拥有纪录日志所需的所有功能
- 标准库里的 xml 和 json 包让处理这两种数据格式变得很简单
- io 包支持以流的方式高效处理数据。
- 接口允许你的代码组合已有的功能。
- 阅读标准库的代码是熟悉 Go 语言习惯的好方法。